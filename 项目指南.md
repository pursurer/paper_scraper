## é¡¹ç›®çš„è¡ŒåŠ¨æŒ‡å—

###  ğŸŒ å®è§‚é¡¹ç›®è“å›¾ (Global Context)

> **è¯´æ˜**ï¼šæ­¤éƒ¨åˆ†å®šä¹‰é¡¹ç›®çš„ç»ˆæç›®æ ‡å’Œæ•´ä½“è¿›åº¦ã€‚Agent éœ€åœ¨æ¯æ¬¡ä»»åŠ¡å®Œæˆåæ›´æ–° `Master Plan` çš„æ‰“é’©çŠ¶æ€ã€‚

* **Project Goal**: åˆ›å»º `paper_scraper` - ä¸€ä¸ªç»Ÿä¸€çš„é¡¶ä¼šè®ºæ–‡è·å–å·¥å…·ï¼Œæ•´åˆä¸‰ç§æ•°æ®æ¥æºï¼ˆOpenReview APIã€ç½‘é¡µçˆ¬å–ã€PDF æå–ï¼‰ï¼Œæä¾›æ ‡å‡†åŒ–çš„ CLI å…¥å£å’Œç»Ÿä¸€çš„ CSV è¾“å‡ºæ ¼å¼ã€‚

* **Definitions**: 
  - **OpenReview API v2**: OpenReview å¹³å°çš„å®˜æ–¹ Python APIï¼Œç”¨äºè·å– ICLR/ICML/NeurIPS è®ºæ–‡
  - **Web Scrape**: é€šè¿‡è§£æ HTML è·å– AAAI/IJCAI/ACL/EMNLP ç­‰ä¼šè®®è®ºæ–‡
  - **PDF Extract**: ä¸‹è½½ PDF åä»ä¸­æå–å…ƒæ•°æ®ï¼ˆAAMASï¼‰
  - **Venue**: OpenReview ä¸­çš„ä¼šè®®æ ‡è¯†ï¼Œå¦‚ `ICLR.cc/2024/Conference`
  - **Forum**: è®ºæ–‡åœ¨ OpenReview ä¸Šçš„å”¯ä¸€æ ‡è¯†ç¬¦
  - **Presentation Type**: è®ºæ–‡å±•ç¤ºç±»å‹ï¼ˆOral/Spotlight/Posterï¼‰

* **Master Plan (High-level Breakdown)**:
  - [x] é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæ¶æ„æ­å»º - åˆ›å»ºæ ‡å‡† Python åŒ…ç»“æ„ âœ…
  - [ ] é˜¶æ®µäºŒï¼šæ ¸å¿ƒæ¨¡å—è¿ç§» - è¿ç§» OpenReview æ¥æºçš„ 6 ä¸ªæ ¸å¿ƒæ¨¡å—
    - [x] utils.py âœ…
    - [ ] extractor.py
    - [ ] filters.py
    - [ ] venue.py
    - [ ] paper.py
    - [ ] scraper.py
  - [ ] é˜¶æ®µä¸‰ï¼šç½‘é¡µçˆ¬å–æ¨¡å— - æ·»åŠ  AAAI/IJCAI/ACL ç­‰ç½‘é¡µçˆ¬å–æ”¯æŒ
  - [ ] é˜¶æ®µå››ï¼šPDF æå–æ¨¡å— - æ·»åŠ  AAMAS çš„ PDF å…ƒæ•°æ®æå–
  - [ ] é˜¶æ®µäº”ï¼šCLI å·¥å…·å¼€å‘ - åˆ›å»ºç»Ÿä¸€çš„å‘½ä»¤è¡Œå…¥å£
  - [ ] é˜¶æ®µå…­ï¼šé…ç½®å¤–éƒ¨åŒ– - æ”¯æŒé…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡
  - [ ] é˜¶æ®µä¸ƒï¼šæ¸…ç†ä¸æ–‡æ¡£ - å®Œå–„æ–‡æ¡£å’Œæµ‹è¯•

---

###  ğŸ“œ TDD æ¼”è¿›æ—¥å¿— (Implementation History)

> **è¯´æ˜**ï¼šæ­¤å¤„è®°å½•å·²å®Œæˆä»»åŠ¡çš„å…³é”®æŠ€æœ¯å†³ç­–ã€‚Agent åœ¨å®Œæˆå½“å‰ä»»åŠ¡åï¼Œå¿…é¡»å°†å…³é”®ä¿¡æ¯"å½’æ¡£"åˆ°è¿™é‡Œï¼Œä½œä¸ºç»™æœªæ¥çš„ä¸Šä¸‹æ–‡è®°å¿†ã€‚

* **[å·²å®Œæˆ] é¡¹ç›®åˆ†æä¸æ–‡æ¡£ç¼–å†™ (2025-12-18)**
  * *Implemented Functionality*: åˆ†æåŸé¡¹ç›®ç»“æ„ï¼Œç¼–å†™æ–‡æ¡£
  * *Key Decisions*: 
    - ç¡®å®šä¸‰ç§æ•°æ®æ¥æºï¼šOpenReview APIã€ç½‘é¡µçˆ¬å–ã€PDF æå–
    - ä¿ç•™ 6 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š`scraper`, `paper`, `venue`, `extractor`, `filters`, `utils`
    - æ–°å¢æ¨¡å—ï¼š`web_scraper`ï¼ˆç½‘é¡µçˆ¬å–ï¼‰ã€`pdf_extractor`ï¼ˆPDF æå–ï¼‰
  * *Tests Added*: æ— ï¼ˆæ–‡æ¡£é˜¶æ®µï¼‰

* **[å·²å®Œæˆ] é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæ¶æ„æ­å»º (2025-12-18)**
  * *Implemented Functionality*: åˆ›å»ºæ ‡å‡† Python åŒ…ç›®å½•ç»“æ„
  * *Key Decisions*: 
    - åŒ…åï¼š`paper_scraper`ï¼Œç‰ˆæœ¬ `0.1.0`
    - å®šä¹‰ `SOURCES` å¸¸é‡ï¼Œæ˜ç¡®å„ä¼šè®®çš„æ•°æ®æ¥æº
    - é…ç½®æ”¯æŒç¯å¢ƒå˜é‡ä¼˜å…ˆï¼Œå›é€€åˆ° `config/config.py`
  * *Files Created*:
    - `paper_scraper/__init__.py` - åŒ…å…¥å£ï¼Œå®šä¹‰æ•°æ®æ¥æº
    - `config/__init__.py` + `config.example.py` - é…ç½®æ¨¡å—
    - `tests/test_package.py` - åŒ…å¯¼å…¥æµ‹è¯•
    - `scripts/.gitkeep` - è„šæœ¬ç›®å½•å ä½
    - `requirements.txt`, `README.md`, `.gitignore`, `AGENTS.md`
  * *Tests Added*: `test_package_import`, `test_version_exists`, `test_version_format`, `test_sources_defined`
  * *Git Commit*: `27a08e4` - feat: åˆå§‹åŒ– paper_scraper é¡¹ç›®ç»“æ„

* **[å·²å®Œæˆ] è¿ç§» utils.py æ¨¡å— (2025-12-18)**
  * *Implemented Functionality*: æ ¸å¿ƒå·¥å…·å‡½æ•°è¿ç§»
  * *Key Functions*:
    - `retry_with_backoff()` - é‡è¯•è£…é¥°å™¨ï¼ˆæŒ‡æ•°é€€é¿ï¼Œå¤„ç† 429 é”™è¯¯ï¼‰
    - `safe_api_call()` - å®‰å…¨ API è°ƒç”¨å°è£…
    - `get_client()` - OpenReview API v2 å®¢æˆ·ç«¯è·å–
    - `papers_to_list()` - è®ºæ–‡å­—å…¸è½¬åˆ—è¡¨
    - `to_csv()` - CSV å¯¼å‡ºï¼ˆå»é‡ã€æ¸…ç†æ¢è¡Œç¬¦ã€è‡ªåŠ¨ IDã€UTF-8 BOMï¼‰
    - `save_papers()` / `load_papers()` - PKL åºåˆ—åŒ–/ååºåˆ—åŒ–
  * *Key Decisions*:
    - CSV å¯¼å‡ºå¢åŠ  `append` å‚æ•°ï¼Œæ”¯æŒè¿½åŠ æ¨¡å¼
    - æŠ½å–ç§æœ‰è¾…åŠ©å‡½æ•°ï¼š`_clean_value`, `_clean_text_field`, `_extract_forum_id`
    - å®šä¹‰ `DEFAULT_CSV_FIELDS` å¸¸é‡
  * *Tests Added*: 27 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆæ€»è®¡ 31 ä¸ªæµ‹è¯•é€šè¿‡ï¼‰
    - TestRetryWithBackoff (4 tests)
    - TestSafeApiCall (1 test)
    - TestPapersToList (3 tests)
    - TestCleanValue (5 tests)
    - TestCleanTextField (3 tests)
    - TestExtractForumId (4 tests)
    - TestToCsv (5 tests)
    - TestPklSerialization (2 tests)
  * *Git Commit*: `776e473` - feat: è¿ç§» utils.py æ¨¡å— - å·¥å…·å‡½æ•°

---

### ğŸš€ å½“å‰åŸå­ä»»åŠ¡è§„æ ¼ä¹¦ (Current Atomic Task Spec)

> **âš ï¸ Agent æ³¨æ„**ï¼šè¿™æ˜¯ä½ **å½“å‰**å¿…é¡»ä¸¥æ ¼æ‰§è¡Œçš„ TDD å±€éƒ¨æŒ‡å—ã€‚ä¸è¦å¤„ç† Scope ä»¥å¤–çš„å†…å®¹ã€‚
> **æ‰§è¡Œå®Œæ¯•ååŠ¨ä½œ**ï¼š1. å°†æœ¬èŠ‚å…³é”®ä¿¡æ¯ç§»åŠ¨åˆ°"TDD æ¼”è¿›æ—¥å¿—"ï¼›2. æ›´æ–°"å®è§‚é¡¹ç›®è“å›¾"è¿›åº¦ï¼›3. æ¸…ç©ºå¹¶é‡å†™æœ¬èŠ‚ï¼Œä¸ºä¸‹ä¸€ä¸ªä»»åŠ¡åˆ¶å®šè®¡åˆ’ã€‚

#### 3.1 Goal (Local)

* **Purpose**: è¿ç§» `extractor.py` æ¨¡å— - å­—æ®µæå–å™¨ï¼Œä»è®ºæ–‡å¯¹è±¡ä¸­æå–æŒ‡å®šå­—æ®µ

#### 3.2 Plan (Micro-steps)

* **TDD Steps**:
  1. é˜…è¯»åŸé¡¹ç›® `Openreviewè®ºæ–‡è·å–æ–¹æ¡ˆ/extract.py` çš„å®ç°
  2. åˆ›å»º `paper_scraper/extractor.py`ï¼Œè¿ç§» `Extractor` ç±»
  3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹ `tests/test_extractor.py`
  4. æ›´æ–° `paper_scraper/__init__.py` å¯¼å‡º `Extractor` ç±»
  5. è¿è¡Œæµ‹è¯•å¹¶æäº¤

#### 3.3 Context & Files

* **Source files to reference**: 
  - `Openreviewè®ºæ–‡è·å–æ–¹æ¡ˆ/extract.py` ï¼ˆåŸå®ç°ï¼Œåªè¯»å‚è€ƒï¼‰

* **Target files to create/modify**: 
  - æ–°å»º: `paper_scraper/extractor.py`
  - æ–°å»º: `tests/test_extractor.py`
  - ä¿®æ”¹: `paper_scraper/__init__.py`

* **Relevant Definitions**: 
  - `Extractor` ç±»ç”¨äºä» OpenReview è®ºæ–‡å¯¹è±¡ä¸­æå–æŒ‡å®šå­—æ®µ
  - æ”¯æŒé¡¶å±‚å­—æ®µï¼ˆå¦‚ `forum`ï¼‰å’ŒåµŒå¥—å­—æ®µï¼ˆå¦‚ `content.title`ï¼‰

#### 3.4 Verification

* **Test Cases**: 
  - [ ] `test_extract_top_level_fields` - æå–é¡¶å±‚å­—æ®µ
  - [ ] `test_extract_subfields` - æå–åµŒå¥—å­—æ®µ
  - [ ] `test_extract_missing_fields` - ç¼ºå¤±å­—æ®µå¤„ç†
  - [ ] `test_include_subfield_option` - include_subfield é€‰é¡¹

* **Edge Cases**: 
  - å­—æ®µä¸å­˜åœ¨æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²
  - åµŒå¥—å­—æ®µä¸º None çš„å¤„ç†

#### 3.5 Boundaries

* **Out-of-scope**: 
  - ä¸å®ç°çœŸå® OpenReview å¯¹è±¡å¤„ç†ï¼ˆä½¿ç”¨ mockï¼‰
  - ä¸ä¿®æ”¹å…¶ä»–æ¨¡å—

* **Extensions**: 
  - è€ƒè™‘æ·»åŠ ç±»å‹æç¤º
  - è€ƒè™‘æ·»åŠ å­—æ®µéªŒè¯

---

## å½“å‰é¡¹ç›®ç»“æ„

```
è®ºæ–‡è·å–/
â”œâ”€â”€ paper_scraper/              # âœ… æ ¸å¿ƒ Python åŒ…
â”‚   â”œâ”€â”€ __init__.py             # âœ… åŒ…å…¥å£ (v0.1.0)
â”‚   â”œâ”€â”€ utils.py                # âœ… å·¥å…·å‡½æ•°ï¼ˆå·²è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ extractor.py            # ğŸ”œ ä¸‹ä¸€æ­¥è¿ç§»
â”‚   â”œâ”€â”€ filters.py              # [å¾…è¿ç§»]
â”‚   â”œâ”€â”€ venue.py                # [å¾…è¿ç§»]
â”‚   â”œâ”€â”€ paper.py                # [å¾…è¿ç§»]
â”‚   â”œâ”€â”€ scraper.py              # [å¾…è¿ç§»]
â”‚   â”œâ”€â”€ web_scraper.py          # [å¾…åˆ›å»º]
â”‚   â””â”€â”€ pdf_extractor.py        # [å¾…åˆ›å»º]
â”‚
â”œâ”€â”€ scripts/                    # âœ… è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ tests/                      # âœ… æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_package.py         # âœ… 4 ä¸ªæµ‹è¯•
â”‚   â””â”€â”€ test_utils.py           # âœ… 27 ä¸ªæµ‹è¯•
â”‚
â”œâ”€â”€ config/                     # âœ… é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ config.example.py
â”‚
â”œâ”€â”€ .gitignore                  # âœ…
â”œâ”€â”€ requirements.txt            # âœ…
â”œâ”€â”€ README.md                   # âœ…
â”œâ”€â”€ AGENTS.md                   # âœ…
â”œâ”€â”€ æ–‡ä»¶ç»“æ„.md                  # âœ…
â””â”€â”€ é¡¹ç›®æŒ‡å—.md                  # âœ… æœ¬æ–‡ä»¶
```

## æ•°æ®æ¥æºæ˜ å°„

| ä¼šè®® | å…¨ç§° | æ¥æºç±»å‹ | é¢†åŸŸ |
|------|------|---------|------|
| **AAAI** | AAAI Conference on Artificial Intelligence | Web Scrape | äººå·¥æ™ºèƒ½ç»¼åˆ |
| **AAMAS** | International Conference on Autonomous Agents and Multiagent Systems | PDF Extract | å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ |
| **ACL** | Annual Meeting of the Association for Computational Linguistics | Web Scrape | è‡ªç„¶è¯­è¨€å¤„ç† |
| **AISTATS** | International Conference on Artificial Intelligence and Statistics | Web Scrape | äººå·¥æ™ºèƒ½ä¸ç»Ÿè®¡ |
| **EMNLP** | Conference on Empirical Methods in Natural Language Processing | Web Scrape | è‡ªç„¶è¯­è¨€å¤„ç† |
| **ICLR** | International Conference on Learning Representations | OpenReview | æ·±åº¦å­¦ä¹  |
| **ICML** | International Conference on Machine Learning | OpenReview | æœºå™¨å­¦ä¹  |
| **IJCAI** | International Joint Conference on Artificial Intelligence | Web Scrape | äººå·¥æ™ºèƒ½ç»¼åˆ |
| **NAACL** | Annual Conference of the North American Chapter of the ACL | Web Scrape | è‡ªç„¶è¯­è¨€å¤„ç† |
| **NeurIPS** | Conference on Neural Information Processing Systems | OpenReview | æœºå™¨å­¦ä¹ /ç¥ç»ç½‘ç»œ |
